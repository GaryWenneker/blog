---
layout: post
title: Troubleshooting the Sitecore Dynamic Placeholder Glitch
date: 1970-01-18 15:37:34.000000000 +01:00
---
<p>A few weeks ago I was asked to do some generic implementation of ReactJS renderings in <a href="https://doc.sitecore.net/sitecore_experience_accelerator">Sitecore SXA</a>. The challenges: It needs to work with standard SXA, using dynamic placeholders, using an ORM mapper like <a href="http://glass.lu/">Glass</a> but also pass only needed data structures to the components, thus the serialization may not be too bloated. During this journey I found an interesting issue you might get into as well.</p><p>So what happened? My placeholders did not show up in my component. One component had one, the other did not. What went wrong?! They used the same codebase in the controller and same client code in the front-end. <em>Could it be code? Could it be a bug?!!</em> It was driving me crazy! It felt like....</p><figure class="kg-image-card"><img src="https://i.giphy.com/Q445d1oeGJU0E.gif" class="kg-image"></figure><h2 id="setting-up-the-reactjs-scaffolding">Setting up the ReactJS scaffolding</h2><p>As you may have read in one of my posts <a href="/2018/01/04/sitecore-experience-accelerator/">Tuning Sitecore Experience Accelerator (SXA) with React.Net</a> it is quite easy to have your own components included in SXA having placeholders where you can add additional components. And you want them to be dynamic. That means that under the hood a <a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">Guid</a> is added to the name of the placeholder. This way when you re-use the component they do not have the same child components in them.</p><p>What we eventually want to have is a component with one or more placeholders. This looks something like this:</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_0922.png" class="kg-image"></figure><p>But instead I get:</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_0932.png" class="kg-image"></figure><h3 id="creating-the-items">Creating the items</h3><p>To make it all very easy for you to understand I leave out all code stuff and focus just on the actual problem. The code is simple and handles the creation of dynamic placeholders based on the datasource template of my component.</p><p>I start by creating three placeholder settings:</p><ul><li>laphroig-16years</li><li>machallan</li><li>majesty <em>(my favorite Islay, cheap but good)</em></li></ul><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_0934.png" class="kg-image"></figure><p>These will be the placeholders for my Whisky Component. Additionally we'll have to add the items to a datasource template for this component:</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_0938.png" class="kg-image"></figure><h3 id="adding-the-component-to-the-page">Adding the component to the page</h3><p>Now that we have all the things in place we can add the component to the page. In the available Renderings section of the SXA Presentation node I've added my component so I can drag it onto my page in the Experience Editor. I select the Component Properties and select the Placeholder Configuration pointing to the keys I need to use. It is a necessity to have placeholder settings in place otherwise they won't show up. For the ease I will not fill the Allowed Controls.</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_0941.png" class="kg-image"></figure><h2 id="troubleshooting-the-dynamic-placeholder">Troubleshooting the dynamic placeholder</h2><p>In my real environment one component shows the placeholder and the other one doesn't show a placeholder. This component will combine the issue so you already can check yourself where the differences are. First thing that came up to me was that it might have to do something with the code. I attached to the process and found a difference between the placeholder which showed up and a piece of code that did not render the placeholder and notice the property Editable is false:</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_0948.png" class="kg-image"></figure><p>This was strange because the other placeholders were configured the same way. But was this because of my code? It wasn't. The placeholder is returned from the SitecoreHelper class. And it also shows that editable = false:</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_0824.png" class="kg-image"></figure><h3 id="validation-of-different-sitecore-environments">Validation of different Sitecore environments</h3><p>I began to feel a little desperate...</p><figure class="kg-image-card"><img src="https://i.giphy.com/Oz83Odp7k0yCA.gif" class="kg-image"></figure><p>Had it to do something with the Sitecore items? And then it struck me. The placeholder that didn't show up was different than the other two because it has a dash sign: <code>laphroig-16years</code>. Some crazier even, when removing the digit from the name works too. So a dash followed by a number will render your placeholder ineditable :-) I remember from an earlier version that the dynamic placeholders had a guid in the display name and now in Sitecore 9.0.1 its gone and shows only the name:</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_1006.png" class="kg-image"></figure><p>So what if I would remove the dash sign from my placeholder?</p><p>So I did two things:</p><ul><li>change the key of the placeholder to <code>laphroig16years</code></li><li>change the value of the placeholder key value for the datasource template for the controller (dynamically getting the placeholders)</li></ul><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_1010.png" class="kg-image"></figure><h2 id="problem-solved-">Problem solved!</h2><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_1013.png" class="kg-image"></figure><p>All placeholders are showing. You can even use underscore signs, slashes and other signs in your placeholder key names. Using dashes followed by a number just will disable your component.</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_1022.png" class="kg-image"></figure><h2 id="sxa-to-the-rescue">SXA to the rescue</h2><p>Next step is to do something different, the right way: use Sitecore SXA.</p><h3 id="sitecore-sxa-s-placeholder-to-the-rescue">Sitecore SXA's Placeholder to the rescue</h3><p>Checking out the code for the placeholder used by SXA there's no difference:</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_1421.png" class="kg-image"></figure><p>So I checked the key of the placeholder in SXA:</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_1423.png" class="kg-image"></figure><p>SXA has its own implementation of handling the uniqueness of the selected rendering. Back to the ReactJS rendering with its dynamic placeholder I renamed it to column-1-1. I was pretty sure that this is not going to work because a dash with a number didn't work! But what the...</p><figure class="kg-image-card"><img src="https://ghost-azure-gary.azurewebsites.net/content/images/2018/03/2018-03-19_1428.png" class="kg-image"></figure><p>It works when just having a number and not any trailing words. Also notice the nice guid now in the name. That wasn't here before! The placeholder implementation of SXA is very different. As stated here: When you use dynamic placeholders, you can add the same placeholder name several times. You can do this across multiple renderings, and you can even use the same placeholder multiple times in a single rendering (source: <a href="https://doc.sitecore.net/sitecore_experience_platform/developing/developing_with_sitecore/dynamic_placeholders">Sitecore</a>).</p><p>The resolution is of three options:</p><ul><li>Use the splitters in SXA (they have their own implementation of handling the unique key)</li><li>Building your own unique key implementation like in <a href="https://stackoverflow.com/questions/15134720/sitecore-dynamic-placeholders-with-mvc/30514133#30514133">this example</a></li><li>Accept the placeholder key name limitation and go with my solution</li></ul><p>So avoid dashes with numbers and letters in them, even dashes of water in your whisky! cheers!</p><figure class="kg-image-card"><img src="https://i.giphy.com/pgHJTBBlrNXEs.gif" class="kg-image"></figure>
